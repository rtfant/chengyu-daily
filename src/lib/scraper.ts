{"success":true,"file":{"name":"scraper.ts","path":"outputs/scraper.ts","size":18931,"content":"aW1wb3J0ICogYXMgY2hlZXJpbyBmcm9tICJjaGVlcmlvIjsKaW1wb3J0IHsgSWRpb20sIHNlZWRJZGlvbXMgfSBmcm9tICJAL2RhdGEvc2VlZC1pZGlvbXMiOwppbXBvcnQgeyBleHRlbmRlZElkaW9tcyB9IGZyb20gIkAvZGF0YS9leHRlbmRlZC1pZGlvbXMiOwoKLy8g6K+35rGC6LaF5pe25pe26Ze0CmNvbnN0IFRJTUVPVVQgPSAxMDAwMDsKCi8vIOmAmueUqOivt+axguWktApjb25zdCBIRUFERVJTID0gewogICJVc2VyLUFnZW50IjoKICAgICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIwLjAuMC4wIFNhZmFyaS81MzcuMzYiLAogIEFjY2VwdDogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LCovKjtxPTAuOCIsCiAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSxlbjtxPTAuOCIsCn07CgovLyAtLS0gU291cmNlIDE6IOeZvuW6puaxieivrSAtLS0KYXN5bmMgZnVuY3Rpb24gc2NyYXBlRnJvbUJhaWR1SGFueXUod29yZDogc3RyaW5nKTogUHJvbWlzZTxJZGlvbSB8IG51bGw+IHsKICB0cnkgewogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vaGFueXUuYmFpZHUuY29tL3M/d2Q9JHtlbmNvZGVVUklDb21wb25lbnQod29yZCl9JnB0eXBlPXppY2lgOwogICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7CiAgICAgIGhlYWRlcnM6IEhFQURFUlMsCiAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dChUSU1FT1VUKSwKICAgIH0pOwogICAgaWYgKCFyZXMub2spIHJldHVybiBudWxsOwoKICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXMudGV4dCgpOwogICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChodG1sKTsKCiAgICBjb25zdCBwaW55aW4gPQogICAgICAkKCIjcGlueWluIC5rZXl3b3JkIikudGV4dCgpLnRyaW0oKSB8fAogICAgICAkKCIucHJvbm91bmNlIC5rZXl3b3JkIikudGV4dCgpLnRyaW0oKSB8fAogICAgICAiIjsKCiAgICAvLyDojrflj5bmm7Tor6bnu4bnmoTph4rkuYkKICAgIGxldCBtZWFuaW5nID0gIiI7CiAgICBjb25zdCBtZWFuaW5nRWwgPSAkKCIudGFiLWNvbnRlbnQgLmNvbnRlbnQgLnRleHQiKS5maXJzdCgpOwogICAgaWYgKG1lYW5pbmdFbC5sZW5ndGgpIHsKICAgICAgbWVhbmluZyA9IG1lYW5pbmdFbC50ZXh0KCkudHJpbSgpOwogICAgfQogICAgaWYgKCFtZWFuaW5nKSB7CiAgICAgIG1lYW5pbmcgPSAkKCIjZXhwbGFuYXRpb24gLnRleHQiKS5maXJzdCgpLnRleHQoKS50cmltKCk7CiAgICB9CiAgICAvLyDlsJ3or5Xojrflj5bmm7TlpJrph4rkuYnlhoXlrrkKICAgIGlmICghbWVhbmluZykgewogICAgICAkKCIuYmFzaWNtZWFuLWl0ZW0iKS5lYWNoKChfLCBlbCkgPT4gewogICAgICAgIGNvbnN0IHRleHQgPSAkKGVsKS50ZXh0KCkudHJpbSgpOwogICAgICAgIGlmICh0ZXh0ICYmIG1lYW5pbmcubGVuZ3RoIDwgNTAwKSB7CiAgICAgICAgICBtZWFuaW5nICs9IChtZWFuaW5nID8gIu+8myIgOiAiIikgKyB0ZXh0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgY29uc3Qgb3JpZ2luID0KICAgICAgJCgiI3NvdXJjZSAudGV4dCIpLmZpcnN0KCkudGV4dCgpLnRyaW0oKSB8fAogICAgICAkKCIudGFiLWNvbnRlbnQiKQogICAgICAgIC5maWx0ZXIoKF8sIGVsKSA9PiAkKGVsKS5maW5kKCIudGl0bGUiKS50ZXh0KCkuaW5jbHVkZXMoIuWHuuWkhCIpKQogICAgICAgIC5maW5kKCIudGV4dCIpCiAgICAgICAgLmZpcnN0KCkKICAgICAgICAudGV4dCgpCiAgICAgICAgLnRyaW0oKSB8fAogICAgICAiIjsKCiAgICAvLyDojrflj5blpJrmnaHkvovlj6UKICAgIGNvbnN0IGV4YW1wbGVzOiBzdHJpbmdbXSA9IFtdOwogICAgJCgiI2V4YW1wbGUgLnRleHQsIC5leGFtcGxlLWl0ZW0iKS5lYWNoKChpLCBlbCkgPT4gewogICAgICBpZiAoaSA8IDMpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gJChlbCkudGV4dCgpLnRyaW0oKTsKICAgICAgICBpZiAodGV4dCkgZXhhbXBsZXMucHVzaCh0ZXh0KTsKICAgICAgfQogICAgfSk7CgogICAgY29uc3Qgc3lub255bXNUZXh0ID0KICAgICAgJCgiI3N5bm9ueW0gLnRleHQiKS50ZXh0KCkudHJpbSgpIHx8CiAgICAgICQoIi50YWItY29udGVudCIpCiAgICAgICAgLmZpbHRlcigoXywgZWwpID0+ICQoZWwpLmZpbmQoIi50aXRsZSIpLnRleHQoKS5pbmNsdWRlcygi6L+R5LmJ6K+NIikpCiAgICAgICAgLmZpbmQoIi50ZXh0IikKICAgICAgICAudGV4dCgpCiAgICAgICAgLnRyaW0oKSB8fAogICAgICAiIjsKICAgIGNvbnN0IGFudG9ueW1zVGV4dCA9CiAgICAgICQoIiNhbnRvbnltIC50ZXh0IikudGV4dCgpLnRyaW0oKSB8fAogICAgICAkKCIudGFiLWNvbnRlbnQiKQogICAgICAgIC5maWx0ZXIoKF8sIGVsKSA9PiAkKGVsKS5maW5kKCIudGl0bGUiKS50ZXh0KCkuaW5jbHVkZXMoIuWPjeS5ieivjSIpKQogICAgICAgIC5maW5kKCIudGV4dCIpCiAgICAgICAgLnRleHQoKQogICAgICAgIC50cmltKCkgfHwKICAgICAgIiI7CgogICAgY29uc3Qgc3lub255bXMgPSBzeW5vbnltc1RleHQKICAgICAgPyBzeW5vbnltc1RleHQuc3BsaXQoL1vjgIHvvIwsXHNdKy8pLmZpbHRlcihCb29sZWFuKQogICAgICA6IFtdOwogICAgY29uc3QgYW50b255bXMgPSBhbnRvbnltc1RleHQKICAgICAgPyBhbnRvbnltc1RleHQuc3BsaXQoL1vjgIHvvIwsXHNdKy8pLmZpbHRlcihCb29sZWFuKQogICAgICA6IFtdOwoKICAgIGlmICghbWVhbmluZyAmJiAhcGlueWluKSByZXR1cm4gbnVsbDsKCiAgICByZXR1cm4gewogICAgICBpZGlvbTogd29yZCwKICAgICAgcGlueWluOiBwaW55aW4gfHwgIiIsCiAgICAgIG1lYW5pbmc6IG1lYW5pbmcgfHwgYCR7d29yZH3nmoTph4rkuYlgLAogICAgICBvcmlnaW46IG9yaWdpbiB8fCAiIiwKICAgICAgZXhhbXBsZTogZXhhbXBsZXNbMF0gfHwgIiIsCiAgICAgIGV4YW1wbGVzOiBleGFtcGxlcy5sZW5ndGggPiAwID8gZXhhbXBsZXMgOiB1bmRlZmluZWQsCiAgICAgIHN5bm9ueW1zLAogICAgICBhbnRvbnltcywKICAgIH07CiAgfSBjYXRjaCB7CiAgICByZXR1cm4gbnVsbDsKICB9Cn0KCi8vIC0tLSBTb3VyY2UgMjog5rGJ5YW4ICh6ZGljLm5ldCkgLS0tCmFzeW5jIGZ1bmN0aW9uIHNjcmFwZUZyb21aZGljKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8SWRpb20gfCBudWxsPiB7CiAgdHJ5IHsKICAgIGNvbnN0IHVybCA9IGBodHRwczovL3d3dy56ZGljLm5ldC9oYW5zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHdvcmQpfWA7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsKICAgICAgaGVhZGVyczogSEVBREVSUywKICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KFRJTUVPVVQpLAogICAgfSk7CiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7CgogICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KCk7CiAgICBjb25zdCAkID0gY2hlZXJpby5sb2FkKGh0bWwpOwoKICAgIC8vIOaLvOmfs++8muWcqCAuZGljcHkg5Lit77yI5o6S6ZmkIuazqOmfsyLooYzvvIkKICAgIGxldCBwaW55aW4gPSAiIjsKICAgICQoInAiKS5lYWNoKChfLCBlbCkgPT4gewogICAgICBjb25zdCB0ZXh0ID0gJChlbCkudGV4dCgpOwogICAgICBpZiAodGV4dC5pbmNsdWRlcygi5ou86Z+zIikgJiYgIXRleHQuaW5jbHVkZXMoIuazqOmfsyIpKSB7CiAgICAgICAgcGlueWluID0gJChlbCkuZmluZCgiLmRpY3B5IikudGV4dCgpLnRyaW0oKTsKICAgICAgfQogICAgfSk7CgogICAgbGV0IG1lYW5pbmcgPSAiIjsKICAgIGxldCBvcmlnaW4gPSAiIjsKICAgIGNvbnN0IGV4YW1wbGVzOiBzdHJpbmdbXSA9IFtdOwogICAgY29uc3Qgc3lub255bXM6IHN0cmluZ1tdID0gW107CiAgICBjb25zdCBhbnRvbnltczogc3RyaW5nW10gPSBbXTsKCiAgICAvLyDop6PmnpDmiJDor63op6Pph4rljLrlnZcgKCNjeWpzIC5jb250ZW50IHApCiAgICAkKCIjY3lqcyAuY29udGVudCBwLCAuY3lqcyAuY29udGVudCBwIikuZWFjaCgoXywgZWwpID0+IHsKICAgICAgY29uc3QgdGV4dCA9ICQoZWwpLnRleHQoKS50cmltKCk7CiAgICAgIGlmICh0ZXh0LnN0YXJ0c1dpdGgoIuOAkOino+mHiuOAkSIpKSB7CiAgICAgICAgbWVhbmluZyA9IHRleHQucmVwbGFjZSgi44CQ6Kej6YeK44CRIiwgIiIpLnRyaW0oKTsKICAgICAgfSBlbHNlIGlmICh0ZXh0LnN0YXJ0c1dpdGgoIuOAkOWHuuWkhOOAkSIpKSB7CiAgICAgICAgb3JpZ2luID0gdGV4dC5yZXBsYWNlKCLjgJDlh7rlpITjgJEiLCAiIikudHJpbSgpOwogICAgICB9IGVsc2UgaWYgKHRleHQuc3RhcnRzV2l0aCgi44CQ56S65L6L44CRIikgfHwgdGV4dC5zdGFydHNXaXRoKCLjgJDkvovlj6XjgJEiKSkgewogICAgICAgIGNvbnN0IGV4ID0gdGV4dC5yZXBsYWNlKC9e44CQW+ekuuS+i+S+i+WPpV0r44CRLywgIiIpLnRyaW0oKTsKICAgICAgICBpZiAoZXggJiYgZXhhbXBsZXMubGVuZ3RoIDwgMykgZXhhbXBsZXMucHVzaChleCk7CiAgICAgIH0gZWxzZSBpZiAodGV4dC5zdGFydHNXaXRoKCLjgJDov5HkuYnor43jgJEiKSkgewogICAgICAgIGNvbnN0IHN5biA9IHRleHQucmVwbGFjZSgi44CQ6L+R5LmJ6K+N44CRIiwgIiIpLnRyaW0oKTsKICAgICAgICBzeW5vbnltcy5wdXNoKC4uLnN5bi5zcGxpdCgvW+OAge+8jCxcc10rLykuZmlsdGVyKEJvb2xlYW4pKTsKICAgICAgfSBlbHNlIGlmICh0ZXh0LnN0YXJ0c1dpdGgoIuOAkOWPjeS5ieivjeOAkSIpKSB7CiAgICAgICAgY29uc3QgYW50ID0gdGV4dC5yZXBsYWNlKCLjgJDlj43kuYnor43jgJEiLCAiIikudHJpbSgpOwogICAgICAgIGFudG9ueW1zLnB1c2goLi4uYW50LnNwbGl0KC9b44CB77yMLFxzXSsvKS5maWx0ZXIoQm9vbGVhbikpOwogICAgICB9CiAgICB9KTsKCiAgICAvLyDku44gLmpuciDlkowgLmduciDljLrlnZfmj5Dlj5bmm7TlpJrkvovlj6Xlkozph4rkuYkKICAgIGNvbnN0IGFkZEV4YW1wbGUgPSAoZXg6IHN0cmluZykgPT4gewogICAgICBpZiAoZXggJiYgZXgubGVuZ3RoID4gNSAmJiBleGFtcGxlcy5sZW5ndGggPCAzICYmICFleGFtcGxlcy5zb21lKGUgPT4gZS5pbmNsdWRlcyhleCkgfHwgZXguaW5jbHVkZXMoZSkpKSB7CiAgICAgICAgZXhhbXBsZXMucHVzaChleCk7CiAgICAgIH0KICAgIH07CgogICAgJCgiLmpuciBwLCAuZ25yIHAsIC5nbnIgZGl2IikuZWFjaCgoXywgZWwpID0+IHsKICAgICAgbGV0IHRleHQgPSAkKGVsKS50ZXh0KCkudHJpbSgpOwogICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mbWRhc2g7L2csICJcdTIwMTRcdTIwMTQiKS5yZXBsYWNlKC8maGVsbGlwOy9nLCAiLi4uIikucmVwbGFjZSgvJmxkcXVvOy9nLCAiXHUyMDFDIikucmVwbGFjZSgvJnJkcXVvOy9nLCAiXHUyMDFEIik7CiAgICAgIGlmICh0ZXh0LnN0YXJ0c1dpdGgoIlx1MjVDRSIpIHx8IHRleHQubGVuZ3RoIDwgOCkgcmV0dXJuOwoKICAgICAgLy8g5o+Q5Y+WICLlpoLvvJrjgIwuLi7jgI0iIOagvOW8j+eahOS+i+WPpQogICAgICBjb25zdCBydU1hdGNoID0gdGV4dC5tYXRjaCgvXHU1OTgyW1x1RkYxQTpdP1xzKltcdTMwMENcdTIwMUNdKC4rPylbXHUzMDBEXHUyMDFEXS8pOwogICAgICBpZiAocnVNYXRjaCkgewogICAgICAgIGFkZEV4YW1wbGUocnVNYXRjaFsxXS50cmltKCkpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8g5LuOZ25y6ZW/5paH5pys5Lit5o+Q5Y+WIOOAjC4uLuOAjSDlvJXlj7flhoXnmoTkvovlj6UKICAgICAgY29uc3QgYWxsUXVvdGVzID0gdGV4dC5tYXRjaCgvW1x1MzAwQ1x1MjAxQ10oW15cdTMwMERcdTIwMURdezgsODB9KVtcdTMwMERcdTIwMURdL2cpOwogICAgICBpZiAoYWxsUXVvdGVzKSB7CiAgICAgICAgZm9yIChjb25zdCBxIG9mIGFsbFF1b3RlcykgewogICAgICAgICAgY29uc3QgaW5uZXIgPSBxLnNsaWNlKDEsIC0xKS50cmltKCk7CiAgICAgICAgICAvLyDnoa7kv53mmK/kvovlj6XogIzpnZ7kuablkI3vvIjmjpLpmaTjgIrjgIvkuablkI3lj7flvIDlpLTnmoTlvJXnlKjmnaXmupDvvIkKICAgICAgICAgIGlmIChpbm5lci5sZW5ndGggPiA4ICYmICFpbm5lci5zdGFydHNXaXRoKCJcdTMwMEEiKSkgewogICAgICAgICAgICBhZGRFeGFtcGxlKGlubmVyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyDmj5Dlj5bljIXlkKvmiJDor63or43mnKzouqvnmoTnlKjms5Xlj6XlrZDvvIjpgJrluLjmmK9qbnLljLrlnZfnmoTnn63kvovlj6XvvIkKICAgICAgaWYgKHRleHQuaW5jbHVkZXMod29yZCkgJiYgdGV4dC5sZW5ndGggPiB3b3JkLmxlbmd0aCArIDQgJiYgdGV4dC5sZW5ndGggPCAxNTApIHsKICAgICAgICBpZiAodGV4dC5zdGFydHNXaXRoKCJbIikgfHwgdGV4dC5pbmNsdWRlcygiXHU2MkZDXHU5N0YzIikgfHwgdGV4dC5pbmNsdWRlcygiXHU2Q0U4XHU5N0YzIikpIHJldHVybjsKICAgICAgICBpZiAodGV4dC5zdGFydHNXaXRoKHdvcmQpICYmIC9bYS16QS1aXHUwMTAxXHUwMEUxXHUwMUNFXHUwMEUwXHUwMTEzXHUwMEU5XHUwMTFCXHUwMEU4XHUwMTJCXHUwMEVEXHUwMUQwXHUwMEVDXHUwMTREXHUwMEYzXHUwMUQyXHUwMEYyXHUwMTZCXHUwMEZBXHUwMUQ0XHUwMEY5XHUwMUQ2XHUwMUQ4XHUwMURBXHUwMURDXHUzMTAwLVx1MzEyRl0vLnRlc3QodGV4dC5zbGljZSh3b3JkLmxlbmd0aCwgd29yZC5sZW5ndGggKyAzKSkpIHJldHVybjsKICAgICAgICBpZiAoL1tcdTMxMDAtXHUzMTJGXXsyLH0vLnRlc3QodGV4dCkpIHJldHVybjsKICAgICAgICBpZiAob3JpZ2luICYmICh0ZXh0LmluY2x1ZGVzKG9yaWdpbikgfHwgb3JpZ2luLmluY2x1ZGVzKHRleHQpKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGNsZWFuRXggPSB0ZXh0LnJlcGxhY2UoL1tcdTI1Q0VcdTI1Q0ZcdTI1QTBdL2csICIiKS50cmltKCk7CiAgICAgICAgYWRkRXhhbXBsZShjbGVhbkV4KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIOWkh+eUqOmHiuS5ieadpea6kAogICAgICBpZiAoIW1lYW5pbmcpIHsKICAgICAgICBpZiAodGV4dC5pbmNsdWRlcygiWyIpICYmIHRleHQuaW5jbHVkZXMoIl0iKSkgewogICAgICAgICAgY29uc3QgbSA9IHRleHQucmVwbGFjZSgvXFsuKj9cXVxzKi8sICIiKS50cmltKCk7CiAgICAgICAgICBpZiAobS5sZW5ndGggPiA1KSBtZWFuaW5nID0gbTsKICAgICAgICB9IGVsc2UgaWYgKHRleHQubGVuZ3RoID4gOCAmJiAhdGV4dC5zdGFydHNXaXRoKCJcdTU5ODIiKSkgewogICAgICAgICAgbWVhbmluZyA9IHRleHQ7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICAvLyDlpoLmnpzkvovlj6XkuI3otrMz5p2h77yM5LuO5Ye65aSE5Lit5o+Q5Y+W5byV55So5Y+l5L2c5Li66KGl5YWF5L6L5Y+lCiAgICBpZiAoZXhhbXBsZXMubGVuZ3RoIDwgMyAmJiBvcmlnaW4pIHsKICAgICAgY29uc3QgcXVvdGVNYXRjaCA9IG9yaWdpbi5tYXRjaCgvWyJcdTIwMUNcdTMwMENdKC57OCx9PylbIlx1MjAxRFx1MzAwRF0vKTsKICAgICAgaWYgKHF1b3RlTWF0Y2gpIHsKICAgICAgICBjb25zdCBleCA9IHF1b3RlTWF0Y2hbMV0udHJpbSgpOwogICAgICAgIGlmIChleCAmJiAhZXhhbXBsZXMuc29tZShlID0+IGUuaW5jbHVkZXMoZXgpIHx8IGV4LmluY2x1ZGVzKGUpKSkgewogICAgICAgICAgZXhhbXBsZXMucHVzaChleCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKCFtZWFuaW5nICYmICFwaW55aW4pIHJldHVybiBudWxsOwoKICAgIHJldHVybiB7CiAgICAgIGlkaW9tOiB3b3JkLAogICAgICBwaW55aW46IHBpbnlpbiB8fCAiIiwKICAgICAgbWVhbmluZzogbWVhbmluZyB8fCBgJHt3b3JkfeeahOmHiuS5iWAsCiAgICAgIG9yaWdpbjogb3JpZ2luIHx8ICIiLAogICAgICBleGFtcGxlOiBleGFtcGxlc1swXSB8fCAiIiwKICAgICAgZXhhbXBsZXM6IGV4YW1wbGVzLmxlbmd0aCA+IDAgPyBleGFtcGxlcyA6IHVuZGVmaW5lZCwKICAgICAgc3lub255bXMsCiAgICAgIGFudG9ueW1zLAogICAgfTsKICB9IGNhdGNoIHsKICAgIHJldHVybiBudWxsOwogIH0KfQoKLy8gLS0tIFNvdXJjZSAzOiDmsYnmloflrabnvZEgKGh3eG5ldC5jb20pIC0tLQphc3luYyBmdW5jdGlvbiBzY3JhcGVGcm9tSHd4bmV0KHdvcmQ6IHN0cmluZyk6IFByb21pc2U8SWRpb20gfCBudWxsPiB7CiAgdHJ5IHsKICAgIGNvbnN0IHVybCA9IGBodHRwczovL2N5Lmh3eG5ldC5jb20vdmlldy8ke2VuY29kZVVSSUNvbXBvbmVudCh3b3JkKX0uaHRtbGA7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsKICAgICAgaGVhZGVyczogSEVBREVSUywKICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KFRJTUVPVVQpLAogICAgfSk7CiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7CgogICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KCk7CiAgICBjb25zdCAkID0gY2hlZXJpby5sb2FkKGh0bWwpOwoKICAgIGxldCBwaW55aW4gPSAiIjsKICAgIGxldCBtZWFuaW5nID0gIiI7CiAgICBsZXQgb3JpZ2luID0gIiI7CiAgICBjb25zdCBleGFtcGxlczogc3RyaW5nW10gPSBbXTsKICAgIGNvbnN0IHN5bm9ueW1zOiBzdHJpbmdbXSA9IFtdOwogICAgY29uc3QgYW50b255bXM6IHN0cmluZ1tdID0gW107CgogICAgLy8g5ou86Z+zCiAgICBwaW55aW4gPSAkKCIuY3lfcHkiKS50ZXh0KCkudHJpbSgpIHx8ICQoIi5waW55aW4iKS50ZXh0KCkudHJpbSgpIHx8ICIiOwoKICAgIC8vIOino+aekOWQhOS4quWtl+autQogICAgJCgiLmN5X2NvbnRlbnQgbGksIC5jeV90YiB0ciIpLmVhY2goKF8sIGVsKSA9PiB7CiAgICAgIGNvbnN0IGxhYmVsID0gJChlbCkuZmluZCgiLmN5X3RiX3RpdCwgdGQ6Zmlyc3QtY2hpbGQiKS50ZXh0KCkudHJpbSgpOwogICAgICBjb25zdCB2YWx1ZSA9ICQoZWwpLmZpbmQoIi5jeV90Yl9jb24sIHRkOmxhc3QtY2hpbGQiKS50ZXh0KCkudHJpbSgpIHx8ICQoZWwpLnRleHQoKS5yZXBsYWNlKGxhYmVsLCAiIikudHJpbSgpOwoKICAgICAgaWYgKGxhYmVsLmluY2x1ZGVzKCLop6Pph4oiKSB8fCBsYWJlbC5pbmNsdWRlcygi6YeK5LmJIikpIHsKICAgICAgICBtZWFuaW5nID0gdmFsdWU7CiAgICAgIH0KICAgICAgaWYgKGxhYmVsLmluY2x1ZGVzKCLlh7rlpIQiKSB8fCBsYWJlbC5pbmNsdWRlcygi5YW45pWFIikpIHsKICAgICAgICBvcmlnaW4gPSB2YWx1ZTsKICAgICAgfQogICAgICBpZiAobGFiZWwuaW5jbHVkZXMoIuS4vuS+iyIpIHx8IGxhYmVsLmluY2x1ZGVzKCLkvovlj6UiKSB8fCBsYWJlbC5pbmNsdWRlcygi56S65L6LIikpIHsKICAgICAgICBpZiAodmFsdWUgJiYgZXhhbXBsZXMubGVuZ3RoIDwgMykgZXhhbXBsZXMucHVzaCh2YWx1ZSk7CiAgICAgIH0KICAgICAgaWYgKGxhYmVsLmluY2x1ZGVzKCLov5HkuYkiKSkgewogICAgICAgIHN5bm9ueW1zLnB1c2goLi4udmFsdWUuc3BsaXQoL1vjgIHvvIwsXHNdKy8pLmZpbHRlcihCb29sZWFuKSk7CiAgICAgIH0KICAgICAgaWYgKGxhYmVsLmluY2x1ZGVzKCLlj43kuYkiKSkgewogICAgICAgIGFudG9ueW1zLnB1c2goLi4udmFsdWUuc3BsaXQoL1vjgIHvvIwsXHNdKy8pLmZpbHRlcihCb29sZWFuKSk7CiAgICAgIH0KICAgIH0pOwoKICAgIGlmICghbWVhbmluZyAmJiAhcGlueWluKSByZXR1cm4gbnVsbDsKCiAgICByZXR1cm4gewogICAgICBpZGlvbTogd29yZCwKICAgICAgcGlueWluLAogICAgICBtZWFuaW5nOiBtZWFuaW5nIHx8IGAke3dvcmR955qE6YeK5LmJYCwKICAgICAgb3JpZ2luOiBvcmlnaW4gfHwgIiIsCiAgICAgIGV4YW1wbGU6IGV4YW1wbGVzWzBdIHx8ICIiLAogICAgICBleGFtcGxlczogZXhhbXBsZXMubGVuZ3RoID4gMCA/IGV4YW1wbGVzIDogdW5kZWZpbmVkLAogICAgICBzeW5vbnltcywKICAgICAgYW50b255bXMsCiAgICB9OwogIH0gY2F0Y2ggewogICAgcmV0dXJuIG51bGw7CiAgfQp9CgovLyAtLS0gU291cmNlIDQ6IOWNg+evh+WbveWtpiAocWlhbnAuY29tKSAtLS0KYXN5bmMgZnVuY3Rpb24gc2NyYXBlRnJvbVFpYW5wKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8SWRpb20gfCBudWxsPiB7CiAgdHJ5IHsKICAgIGNvbnN0IHVybCA9IGBodHRwczovL2NoZW5neXUucWlhbnAuY29tL2N5LyR7ZW5jb2RlVVJJQ29tcG9uZW50KHdvcmQpfWA7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsKICAgICAgaGVhZGVyczogSEVBREVSUywKICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KFRJTUVPVVQpLAogICAgfSk7CiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7CgogICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KCk7CiAgICBjb25zdCAkID0gY2hlZXJpby5sb2FkKGh0bWwpOwoKICAgIGxldCBwaW55aW4gPSAiIjsKICAgIGxldCBtZWFuaW5nID0gIiI7CiAgICBsZXQgb3JpZ2luID0gIiI7CiAgICBjb25zdCBleGFtcGxlczogc3RyaW5nW10gPSBbXTsKICAgIGNvbnN0IHN5bm9ueW1zOiBzdHJpbmdbXSA9IFtdOwogICAgY29uc3QgYW50b255bXM6IHN0cmluZ1tdID0gW107CgogICAgLy8g5ou86Z+zCiAgICBwaW55aW4gPSAkKCIucHksIC5waW55aW4iKS50ZXh0KCkudHJpbSgpIHx8ICIiOwoKICAgIC8vIOino+aekOWGheWuuQogICAgJCgiLmN5LWluZm8gdHIsIC5pbmZvLWl0ZW0iKS5lYWNoKChfLCBlbCkgPT4gewogICAgICBjb25zdCB0ZXh0ID0gJChlbCkudGV4dCgpOwogICAgICBpZiAodGV4dC5pbmNsdWRlcygi5ou86Z+zIikpIHsKICAgICAgICBwaW55aW4gPSBwaW55aW4gfHwgdGV4dC5yZXBsYWNlKC/mi7zpn7Nb77yaOl1ccyovLCAiIikudHJpbSgpOwogICAgICB9CiAgICAgIGlmICh0ZXh0LmluY2x1ZGVzKCLop6Pph4oiKSB8fCB0ZXh0LmluY2x1ZGVzKCLph4rkuYkiKSkgewogICAgICAgIG1lYW5pbmcgPSB0ZXh0LnJlcGxhY2UoL1vop6Pph4rph4rkuYldW++8mjpdXHMqLywgIiIpLnRyaW0oKTsKICAgICAgfQogICAgICBpZiAodGV4dC5pbmNsdWRlcygi5Ye65aSEIikpIHsKICAgICAgICBvcmlnaW4gPSB0ZXh0LnJlcGxhY2UoL+WHuuWkhFvvvJo6XVxzKi8sICIiKS50cmltKCk7CiAgICAgIH0KICAgICAgaWYgKHRleHQuaW5jbHVkZXMoIuS+i+WPpSIpIHx8IHRleHQuaW5jbHVkZXMoIuS4vuS+iyIpKSB7CiAgICAgICAgY29uc3QgZXggPSB0ZXh0LnJlcGxhY2UoL1vkvovlj6XkuL7kvotdW++8mjpdXHMqLywgIiIpLnRyaW0oKTsKICAgICAgICBpZiAoZXggJiYgZXhhbXBsZXMubGVuZ3RoIDwgMykgZXhhbXBsZXMucHVzaChleCk7CiAgICAgIH0KICAgICAgaWYgKHRleHQuaW5jbHVkZXMoIui/keS5ieivjSIpKSB7CiAgICAgICAgY29uc3Qgc3luID0gdGV4dC5yZXBsYWNlKC/ov5HkuYnor41b77yaOl1ccyovLCAiIikudHJpbSgpOwogICAgICAgIHN5bm9ueW1zLnB1c2goLi4uc3luLnNwbGl0KC9b44CB77yMLFxzXSsvKS5maWx0ZXIoQm9vbGVhbikpOwogICAgICB9CiAgICAgIGlmICh0ZXh0LmluY2x1ZGVzKCLlj43kuYnor40iKSkgewogICAgICAgIGNvbnN0IGFudCA9IHRleHQucmVwbGFjZSgv5Y+N5LmJ6K+NW++8mjpdXHMqLywgIiIpLnRyaW0oKTsKICAgICAgICBhbnRvbnltcy5wdXNoKC4uLmFudC5zcGxpdCgvW+OAge+8jCxcc10rLykuZmlsdGVyKEJvb2xlYW4pKTsKICAgICAgfQogICAgfSk7CgogICAgaWYgKCFtZWFuaW5nICYmICFwaW55aW4pIHJldHVybiBudWxsOwoKICAgIHJldHVybiB7CiAgICAgIGlkaW9tOiB3b3JkLAogICAgICBwaW55aW4sCiAgICAgIG1lYW5pbmc6IG1lYW5pbmcgfHwgYCR7d29yZH3nmoTph4rkuYlgLAogICAgICBvcmlnaW46IG9yaWdpbiB8fCAiIiwKICAgICAgZXhhbXBsZTogZXhhbXBsZXNbMF0gfHwgIiIsCiAgICAgIGV4YW1wbGVzOiBleGFtcGxlcy5sZW5ndGggPiAwID8gZXhhbXBsZXMgOiB1bmRlZmluZWQsCiAgICAgIHN5bm9ueW1zLAogICAgICBhbnRvbnltcywKICAgIH07CiAgfSBjYXRjaCB7CiAgICByZXR1cm4gbnVsbDsKICB9Cn0KCi8vIC0tLSBTb3VyY2UgNTog5rGJ56iL6K+N5YW4IChodHRwY24uY29tKSAtLS0KYXN5bmMgZnVuY3Rpb24gc2NyYXBlRnJvbUh0dHBjbih3b3JkOiBzdHJpbmcpOiBQcm9taXNlPElkaW9tIHwgbnVsbD4gewogIHRyeSB7CiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9oeS5odHRwY24uY29tL0h0bWwvQ3kvJHtlbmNvZGVVUklDb21wb25lbnQod29yZCl9LnNodG1sYDsKICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgewogICAgICBoZWFkZXJzOiBIRUFERVJTLAogICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoVElNRU9VVCksCiAgICB9KTsKICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDsKCiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzLnRleHQoKTsKICAgIGNvbnN0ICQgPSBjaGVlcmlvLmxvYWQoaHRtbCk7CgogICAgbGV0IHBpbnlpbiA9ICIiOwogICAgbGV0IG1lYW5pbmcgPSAiIjsKICAgIGxldCBvcmlnaW4gPSAiIjsKICAgIGNvbnN0IGV4YW1wbGVzOiBzdHJpbmdbXSA9IFtdOwogICAgY29uc3Qgc3lub255bXM6IHN0cmluZ1tdID0gW107CiAgICBjb25zdCBhbnRvbnltczogc3RyaW5nW10gPSBbXTsKCiAgICAvLyDlsJ3or5XlpJrnp43pgInmi6nlmagKICAgIHBpbnlpbiA9ICQoIi5waW55aW4iKS50ZXh0KCkudHJpbSgpIHx8ICQoIltjbGFzcyo9J3B5J10iKS5maXJzdCgpLnRleHQoKS50cmltKCkgfHwgIiI7CiAgICBtZWFuaW5nID0gJCgiLmp5anMsIC5leHBsYWluLCBbY2xhc3MqPSdtZWFuJ10iKS5maXJzdCgpLnRleHQoKS50cmltKCkgfHwgIiI7CiAgICBvcmlnaW4gPSAkKCIuY2h1ZCwgLm9yaWdpbiwgW2NsYXNzKj0nc291cmNlJ10iKS5maXJzdCgpLnRleHQoKS50cmltKCkgfHwgIiI7CgogICAgJCgiLmxpanUgbGksIC5leGFtcGxlIGxpIikuZWFjaCgoaSwgZWwpID0+IHsKICAgICAgaWYgKGkgPCAzKSB7CiAgICAgICAgY29uc3QgdGV4dCA9ICQoZWwpLnRleHQoKS50cmltKCk7CiAgICAgICAgaWYgKHRleHQpIGV4YW1wbGVzLnB1c2godGV4dCk7CiAgICAgIH0KICAgIH0pOwoKICAgIGlmICghbWVhbmluZyAmJiAhcGlueWluKSByZXR1cm4gbnVsbDsKCiAgICByZXR1cm4gewogICAgICBpZGlvbTogd29yZCwKICAgICAgcGlueWluLAogICAgICBtZWFuaW5nOiBtZWFuaW5nIHx8IGAke3dvcmR955qE6YeK5LmJYCwKICAgICAgb3JpZ2luOiBvcmlnaW4gfHwgIiIsCiAgICAgIGV4YW1wbGU6IGV4YW1wbGVzWzBdIHx8ICIiLAogICAgICBleGFtcGxlczogZXhhbXBsZXMubGVuZ3RoID4gMCA/IGV4YW1wbGVzIDogdW5kZWZpbmVkLAogICAgICBzeW5vbnltcywKICAgICAgYW50b255bXMsCiAgICB9OwogIH0gY2F0Y2ggewogICAgcmV0dXJuIG51bGw7CiAgfQp9CgovLyAtLS0gU291cmNlIDY6IOafpeWtl+WFuCAoY2hhemlkaWFuLmNvbSkgLS0tCmFzeW5jIGZ1bmN0aW9uIHNjcmFwZUZyb21DaGF6aWRpYW4od29yZDogc3RyaW5nKTogUHJvbWlzZTxJZGlvbSB8IG51bGw+IHsKICB0cnkgewogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vd3d3LmNoYXppZGlhbi5jb20vY3kvJHtlbmNvZGVVUklDb21wb25lbnQod29yZCl9L2A7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsKICAgICAgaGVhZGVyczogSEVBREVSUywKICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KFRJTUVPVVQpLAogICAgfSk7CiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7CgogICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KCk7CiAgICBjb25zdCAkID0gY2hlZXJpby5sb2FkKGh0bWwpOwoKICAgIGxldCBwaW55aW4gPSAiIjsKICAgIGxldCBtZWFuaW5nID0gIiI7CiAgICBsZXQgb3JpZ2luID0gIiI7CiAgICBjb25zdCBleGFtcGxlczogc3RyaW5nW10gPSBbXTsKICAgIGNvbnN0IHN5bm9ueW1zOiBzdHJpbmdbXSA9IFtdOwogICAgY29uc3QgYW50b255bXM6IHN0cmluZ1tdID0gW107CgogICAgJCgiLmN5X2luZm8gdHIiKS5lYWNoKChfLCBlbCkgPT4gewogICAgICBjb25zdCBsYWJlbCA9ICQoZWwpLmZpbmQoInRoIikudGV4dCgpLnRyaW0oKTsKICAgICAgY29uc3QgdmFsdWUgPSAkKGVsKS5maW5kKCJ0ZCIpLnRleHQoKS50cmltKCk7CgogICAgICBpZiAobGFiZWwuaW5jbHVkZXMoIuaLvOmfsyIpKSBwaW55aW4gPSB2YWx1ZTsKICAgICAgaWYgKGxhYmVsLmluY2x1ZGVzKCLop6Pph4oiKSB8fCBsYWJlbC5pbmNsdWRlcygi6YeK5LmJIikpIG1lYW5pbmcgPSB2YWx1ZTsKICAgICAgaWYgKGxhYmVsLmluY2x1ZGVzKCLlh7rlpIQiKSkgb3JpZ2luID0gdmFsdWU7CiAgICAgIGlmIChsYWJlbC5pbmNsdWRlcygi5L6L5a2QIikgfHwgbGFiZWwuaW5jbHVkZXMoIuS+i+WPpSIpKSB7CiAgICAgICAgaWYgKHZhbHVlICYmIGV4YW1wbGVzLmxlbmd0aCA8IDMpIGV4YW1wbGVzLnB1c2godmFsdWUpOwogICAgICB9CiAgICAgIGlmIChsYWJlbC5pbmNsdWRlcygi6L+R5LmJIikpIHsKICAgICAgICBzeW5vbnltcy5wdXNoKC4uLnZhbHVlLnNwbGl0KC9b44CB77yMLFxzXSsvKS5maWx0ZXIoQm9vbGVhbikpOwogICAgICB9CiAgICAgIGlmIChsYWJlbC5pbmNsdWRlcygi5Y+N5LmJIikpIHsKICAgICAgICBhbnRvbnltcy5wdXNoKC4uLnZhbHVlLnNwbGl0KC9b44CB77yMLFxzXSsvKS5maWx0ZXIoQm9vbGVhbikpOwogICAgICB9CiAgICB9KTsKCiAgICBpZiAoIW1lYW5pbmcgJiYgIXBpbnlpbikgcmV0dXJuIG51bGw7CgogICAgcmV0dXJuIHsKICAgICAgaWRpb206IHdvcmQsCiAgICAgIHBpbnlpbiwKICAgICAgbWVhbmluZzogbWVhbmluZyB8fCBgJHt3b3JkfeeahOmHiuS5iWAsCiAgICAgIG9yaWdpbjogb3JpZ2luIHx8ICIiLAogICAgICBleGFtcGxlOiBleGFtcGxlc1swXSB8fCAiIiwKICAgICAgZXhhbXBsZXM6IGV4YW1wbGVzLmxlbmd0aCA+IDAgPyBleGFtcGxlcyA6IHVuZGVmaW5lZCwKICAgICAgc3lub255bXMsCiAgICAgIGFudG9ueW1zLAogICAgfTsKICB9IGNhdGNoIHsKICAgIHJldHVybiBudWxsOwogIH0KfQoKLyoqCiAqIOWQiOW5tuWkmuS4quadpea6kOeahOaVsOaNru+8jOe7vOWQiOaYvuekuuacgOWujOaVtOeahOWGheWuuQogKiDnrZbnlaXvvJrku47miYDmnInmnaXmupDkuK3lj5bmr4/kuKrlrZfmrrXnmoTmnIDkvbPlgLzvvIzkvovlj6Xljrvph43lkIjlubYKICovCmZ1bmN0aW9uIG1lcmdlSWRpb21EYXRhKHJlc3VsdHM6IChJZGlvbSB8IG51bGwpW10pOiBJZGlvbSB8IG51bGwgewogIGNvbnN0IHZhbGlkUmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKChyKTogciBpcyBJZGlvbSA9PiByICE9PSBudWxsKTsKICBpZiAodmFsaWRSZXN1bHRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CgogIGNvbnN0IG1lcmdlZDogSWRpb20gPSB7CiAgICBpZGlvbTogdmFsaWRSZXN1bHRzWzBdLmlkaW9tLAogICAgcGlueWluOiAiIiwKICAgIG1lYW5pbmc6ICIiLAogICAgb3JpZ2luOiAiIiwKICAgIGV4YW1wbGU6ICIiLAogICAgc3lub255bXM6IFtdLAogICAgYW50b255bXM6IFtdLAogIH07CgogIC8vIOaUtumbhuaJgOacieS+i+WPpe+8iOWOu+mHje+8iQogIGNvbnN0IGFsbEV4YW1wbGVzOiBzdHJpbmdbXSA9IFtdOwogIC8vIOaUtumbhuaJgOaciei/keS5ieivjeWSjOWPjeS5ieivje+8iOWOu+mHje+8iQogIGNvbnN0IGFsbFN5bm9ueW1zID0gbmV3IFNldDxzdHJpbmc+KCk7CiAgY29uc3QgYWxsQW50b255bXMgPSBuZXcgU2V0PHN0cmluZz4oKTsKCiAgZm9yIChjb25zdCByIG9mIHZhbGlkUmVzdWx0cykgewogICAgLy8g5ou86Z+z77ya5Y+W56ys5LiA5Liq6Z2e56m655qECiAgICBpZiAoIW1lcmdlZC5waW55aW4gJiYgci5waW55aW4pIHsKICAgICAgbWVyZ2VkLnBpbnlpbiA9IHIucGlueWluOwogICAgfQoKICAgIC8vIOmHiuS5ie+8muWPluacgOmVv+acgOivpue7hueahAogICAgaWYgKHIubWVhbmluZyAmJiByLm1lYW5pbmcubGVuZ3RoID4gbWVyZ2VkLm1lYW5pbmcubGVuZ3RoKSB7CiAgICAgIG1lcmdlZC5tZWFuaW5nID0gci5tZWFuaW5nOwogICAgfQoKICAgIC8vIOWHuuWkhO+8muWPluacgOmVv+eahAogICAgaWYgKHIub3JpZ2luICYmIHIub3JpZ2luLmxlbmd0aCA+IG1lcmdlZC5vcmlnaW4ubGVuZ3RoKSB7CiAgICAgIG1lcmdlZC5vcmlnaW4gPSByLm9yaWdpbjsKICAgIH0KCiAgICAvLyDkvovlj6XvvJrku47miYDmnInmnaXmupDmlLbpm4bvvIzljrvph40KICAgIGNvbnN0IGV4TGlzdCA9IHIuZXhhbXBsZXMgJiYgci5leGFtcGxlcy5sZW5ndGggPiAwID8gci5leGFtcGxlcyA6IHIuZXhhbXBsZSA/IFtyLmV4YW1wbGVdIDogW107CiAgICBmb3IgKGNvbnN0IGV4IG9mIGV4TGlzdCkgewogICAgICBpZiAoZXggJiYgIWFsbEV4YW1wbGVzLnNvbWUoKGUpID0+IGUgPT09IGV4IHx8IGUuaW5jbHVkZXMoZXgpIHx8IGV4LmluY2x1ZGVzKGUpKSkgewogICAgICAgIGFsbEV4YW1wbGVzLnB1c2goZXgpOwogICAgICB9CiAgICB9CgogICAgLy8g6L+R5LmJ6K+N44CB5Y+N5LmJ6K+N5ZCI5bm2CiAgICByLnN5bm9ueW1zLmZvckVhY2goKHMpID0+IHsgaWYgKHMpIGFsbFN5bm9ueW1zLmFkZChzKTsgfSk7CiAgICByLmFudG9ueW1zLmZvckVhY2goKGEpID0+IHsgaWYgKGEpIGFsbEFudG9ueW1zLmFkZChhKTsgfSk7CiAgfQoKICAvLyDmnIDlpJrkv53nlZkz5p2h5L6L5Y+lCiAgbWVyZ2VkLmV4YW1wbGVzID0gYWxsRXhhbXBsZXMuc2xpY2UoMCwgMyk7CiAgbWVyZ2VkLmV4YW1wbGUgPSBtZXJnZWQuZXhhbXBsZXNbMF0gfHwgIiI7CiAgbWVyZ2VkLnN5bm9ueW1zID0gQXJyYXkuZnJvbShhbGxTeW5vbnltcyk7CiAgbWVyZ2VkLmFudG9ueW1zID0gQXJyYXkuZnJvbShhbGxBbnRvbnltcyk7CgogIHJldHVybiBtZXJnZWQ7Cn0KCi8qKgogKiDliKTmlq3kuIDkuKrmiJDor63mlbDmja7mmK/lkKblrozmlbTvvIjmi6XmnInmi7zpn7PjgIHph4rkuYnjgIHlh7rlpITjgIHkuJTmnInoh7PlsJEy5p2h5L6L5Y+l77yJCiAqIOWPquaciemdnuW4uOWujOaVtOeahOaVsOaNruaJjei3s+i/h+e9kee7nOivt+axggogKi8KZnVuY3Rpb24gaXNDb21wbGV0ZShpZGlvbTogSWRpb20pOiBib29sZWFuIHsKICByZXR1cm4gISEoCiAgICBpZGlvbS5waW55aW4gJiYKICAgIGlkaW9tLm1lYW5pbmcgJiYKICAgIGlkaW9tLm9yaWdpbiAmJgogICAgaWRpb20uZXhhbXBsZXMgJiYKICAgIGlkaW9tLmV4YW1wbGVzLmxlbmd0aCA+PSAyCiAgKTsKfQoKLyoqCiAqIEZldGNoIGlkaW9tIGRhdGEgYnkgdHJ5aW5nIG11bHRpcGxlIHNvdXJjZXMsIHdpdGggZmFsbGJhY2sgdG8gc2VlZCBkYXRhLgogKiDlpoLmnpzmnKzlnLDmlbDmja7kuI3lrozmlbTvvIzkvJrku47nvZHnu5zmupDooaXlhYXnvLrlpLHnmoTlrZfmrrXjgIIKICovCmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaElkaW9tKHdvcmQ6IHN0cmluZyk6IFByb21pc2U8SWRpb20+IHsKICAvLyAxLiBDaGVjayBsb2NhbCBkYXRhIGZpcnN0IChmYXN0ZXN0KQogIGNvbnN0IGxvY2FsRGF0YSA9IHNlZWRJZGlvbXNbd29yZF0gfHwgZXh0ZW5kZWRJZGlvbXNbd29yZF0gfHwgbnVsbDsKCiAgLy8g5aaC5p6c5pys5Zyw5pWw5o2u5a6M5pW077yM55u05o6l6L+U5ZueCiAgaWYgKGxvY2FsRGF0YSAmJiBpc0NvbXBsZXRlKGxvY2FsRGF0YSkpIHsKICAgIHJldHVybiBsb2NhbERhdGE7CiAgfQoKICAvLyAyLiBUcnkgc2NyYXBpbmcgZnJvbSBtdWx0aXBsZSBzb3VyY2VzIGluIHBhcmFsbGVsCiAgY29uc3Qgc2NyYXBlcnMgPSBbCiAgICBzY3JhcGVGcm9tQmFpZHVIYW55dSh3b3JkKSwKICAgIHNjcmFwZUZyb21aZGljKHdvcmQpLAogICAgc2NyYXBlRnJvbUh3eG5ldCh3b3JkKSwKICAgIHNjcmFwZUZyb21RaWFucCh3b3JkKSwKICAgIHNjcmFwZUZyb21IdHRwY24od29yZCksCiAgICBzY3JhcGVGcm9tQ2hhemlkaWFuKHdvcmQpLAogIF07CgogIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoc2NyYXBlcnMpOwogIGNvbnN0IHN1Y2Nlc3NSZXN1bHRzID0gcmVzdWx0cwogICAgLmZpbHRlcigocik6IHIgaXMgUHJvbWlzZUZ1bGZpbGxlZFJlc3VsdDxJZGlvbSB8IG51bGw+ID0+IHIuc3RhdHVzID09PSAiZnVsZmlsbGVkIikKICAgIC5tYXAoKHIpID0+IHIudmFsdWUpOwoKICAvLyDlpoLmnpzmnInmnKzlnLDmlbDmja7vvIzkuZ/liqDlhaXlkIjlubbliJfooajkuIDotbfnu7zlkIgKICBpZiAobG9jYWxEYXRhKSB7CiAgICBzdWNjZXNzUmVzdWx0cy51bnNoaWZ0KGxvY2FsRGF0YSk7CiAgfQoKICAvLyDlkIjlubbmiYDmnInmiJDlip/nmoTnu5PmnpwKICBjb25zdCBtZXJnZWQgPSBtZXJnZUlkaW9tRGF0YShzdWNjZXNzUmVzdWx0cyk7CiAgaWYgKG1lcmdlZCkgewogICAgcmV0dXJuIG1lcmdlZDsKICB9CgogIC8vIDMuIOWmguaenOacieacrOWcsOaVsOaNruS9hue9kee7nOWFqOmDqOWksei0pe+8jOS7jeeEtui/lOWbnuacrOWcsOaVsOaNrgogIGlmIChsb2NhbERhdGEpIHsKICAgIHJldHVybiBsb2NhbERhdGE7CiAgfQoKICAvLyA0LiBSZXR1cm4gYSBtaW5pbWFsIGZhbGxiYWNrCiAgcmV0dXJuIHsKICAgIGlkaW9tOiB3b3JkLAogICAgcGlueWluOiAiIiwKICAgIG1lYW5pbmc6ICLmmoLmnKrojrflj5bliLDph4rkuYnvvIzor7fnqI3lkI7lho3or5XjgIIiLAogICAgb3JpZ2luOiAiIiwKICAgIGV4YW1wbGU6ICIiLAogICAgc3lub255bXM6IFtdLAogICAgYW50b255bXM6IFtdLAogIH07Cn0KCi8qKgogKiDojrflj5bmiJDor63liJfooajvvIjnlKjkuo7mkJzntKLvvIkKICovCmV4cG9ydCBmdW5jdGlvbiBnZXRJZGlvbUxpc3QoKTogc3RyaW5nW10gewogIGNvbnN0IGFsbElkaW9tcyA9IG5ldyBTZXQ8c3RyaW5nPigpOwogIE9iamVjdC5rZXlzKHNlZWRJZGlvbXMpLmZvckVhY2goKGspID0+IGFsbElkaW9tcy5hZGQoaykpOwogIE9iamVjdC5rZXlzKGV4dGVuZGVkSWRpb21zKS5mb3JFYWNoKChrKSA9PiBhbGxJZGlvbXMuYWRkKGspKTsKICByZXR1cm4gQXJyYXkuZnJvbShhbGxJZGlvbXMpOwp9Cg==","encoding":"base64","mimeType":"video/mp2t","lastModified":"2026-02-28T09:06:49.457Z"}}